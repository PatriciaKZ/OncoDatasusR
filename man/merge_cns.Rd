% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/merge_cns.r
\name{merge_cns}
\alias{merge_cns}
\title{Merge CNS Codes to Deduplicate Patient Records}
\usage{
merge_cns(apac_table, match_list, run_diagnostics = FALSE)
}
\arguments{
\item{apac_table}{DataFrame. Table containing the APAC database data, including patient records.}

\item{match_list}{DataFrame. Matrix describing the matches between patients, where each row corresponds to a group of potential duplicates.}

\item{run_diagnostics}{Logical. If \code{TRUE}, the function will return diagnostic information about the deduplication process, including the count of CNS codes per patient. Default is \code{FALSE}.}
}
\value{
\itemize{
\item If \code{run_diagnostics = TRUE}, returns a list containing:
\itemize{
\item \code{APAC}: The deduplicated patient table.
\item \code{cns_count}: A table with the count of CNS codes per patient.
}
\item If \code{run_diagnostics = FALSE}, returns only the deduplicated patient table as a DataFrame.
}
}
\description{
This function deduplicates patient records that may have been registered in the system with different CNS codes, using a match list matrix that indicates which rows correspond to the same patient.
}
\details{
\itemize{
\item The function aggregates patient information by unifying duplicate records based on the match list.
\item Fields such as age, staging, icd, and municipality are consolidated by selecting the first non-NA value in the sequence of service dates.
\item The match list should be carefully curated to avoid erroneous matches or duplicates.
\item Diagnostic information can help verify the deduplication process and identify cases requiring manual review.
}
}
\examples{
\dontrun{
# Merge CNS codes to deduplicate patient records with diagnostics
deduplicated_data <- merge_cns(
  apac_table = apac_data, 
  match_list = match_list, 
  run_diagnostics = TRUE
)
head(deduplicated_data$APAC)
head(deduplicated_data$cns_count)
}
}
